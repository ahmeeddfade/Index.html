<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElAhmad TV - Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.10/dist/hls.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        #loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }

        #loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 111, 0, 0.3);
            border-radius: 50%;
            border-top-color: #ff6f00;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ */
        #video-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }

        #video-player {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© */
        #channel-info {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 12px 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            gap: 15px;
            z-index: 100;
            max-width: 400px;
        }

        #channel-logo {
            width: 50px;
            height: 50px;
            object-fit: contain;
        }

        #channel-name {
            font-size: 18px;
            font-weight: bold;
            color: #ff6f00;
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª */
        #channels-list {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.95), transparent);
            padding: 15px 10px;
            display: flex;
            gap: 10px;
            overflow-x: auto;
            scrollbar-width: none;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 50;
        }

        #channels-list::-webkit-scrollbar {
            display: none;
        }

        #channels-list.visible {
            transform: translateY(0);
        }

        .channel-item {
            flex: 0 0 auto;
            width: 120px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .channel-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-5px);
        }

        .channel-item.active {
            background: rgba(255, 111, 0, 0.2);
            border-color: #ff6f00;
            transform: scale(1.05);
        }

        .channel-logo {
            width: 100%;
            height: 60px;
            object-fit: contain;
            margin-bottom: 8px;
            border-radius: 5px;
        }

        .channel-title {
            font-size: 12px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #fff;
        }

        /* Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª */
        #hint {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            backdrop-filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 60;
            white-space: nowrap;
        }

        #hint.visible {
            opacity: 1;
        }

        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ */
        #error-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: #ff6f00;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
            z-index: 200;
            max-width: 80%;
            border: 1px solid #ff6f00;
        }

        /* Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© */
        #menu-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 111, 0, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 70;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(255, 111, 0, 0.3);
            transition: all 0.3s;
        }

        #menu-toggle:hover {
            transform: scale(1.1);
            background: rgba(255, 111, 0, 1);
        }

        /* Ø§Ù„ØªØ¬Ø§ÙˆØ¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .channel-item {
                width: 100px;
            }
            
            .channel-logo {
                height: 50px;
            }
            
            #channel-info {
                right: 10px;
                top: 10px;
                padding: 8px 12px;
            }
            
            #channel-name {
                font-size: 16px;
            }
            
            #menu-toggle {
                width: 45px;
                height: 45px;
                bottom: 15px;
                left: 15px;
            }
        }

        @media (max-width: 480px) {
            .channel-item {
                width: 90px;
                padding: 8px;
            }
            
            .channel-logo {
                height: 40px;
            }
            
            .channel-title {
                font-size: 11px;
            }
            
            #hint {
                font-size: 12px;
                bottom: 80px;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="loading">
        <div class="loader"></div>
        <div style="color: #ff6f00; font-size: 24px; margin-bottom: 10px;">ElAhmad TV</div>
        <div style="color: #ccc; font-size: 14px;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª...</div>
    </div>

    <!-- Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ -->
    <div id="video-container">
        <video id="video-player" autoplay playsinline></video>
    </div>

    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
    <div id="channel-info">
        <img id="channel-logo" src="" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù‚Ù†Ø§Ø©">
        <div id="channel-name"></div>
    </div>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª -->
    <div id="channels-list"></div>

    <!-- ØªÙ„Ù…ÙŠØ­Ø§Øª -->
    <div id="hint">Ø§Ø³ØªØ®Ø¯Ù… â¬…ï¸ â¡ï¸ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø© | â¬†ï¸ Ù„Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</div>

    <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ -->
    <div id="error-message"></div>

    <!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
    <div id="menu-toggle">ğŸ“º</div>

    <script>
        // Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        const videoPlayer = document.getElementById('video-player');
        const loadingScreen = document.getElementById('loading');
        const channelsList = document.getElementById('channels-list');
        const channelInfo = document.getElementById('channel-info');
        const channelLogo = document.getElementById('channel-logo');
        const channelName = document.getElementById('channel-name');
        const hint = document.getElementById('hint');
        const errorMessage = document.getElementById('error-message');
        const menuToggle = document.getElementById('menu-toggle');

        // Ø­Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        let currentState = {
            channels: [],
            currentChannelIndex: 0,
            hlsPlayer: null,
            isChannelsVisible: false,
            hintTimer: null,
            channelsVisibleTimer: null
        };

        // Ø«ÙˆØ§Ø¨Øª Ø§Ù„ØªØ®Ø²ÙŠÙ†
        const STORAGE_KEYS = {
            LAST_CHANNEL: 'elahmad_last_channel',
            VOLUME: 'elahmad_volume'
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        async function initApp() {
            try {
                // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª
                const response = await fetch('channels.json');
                if (!response.ok) throw new Error('ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª');
                
                const data = await response.json();
                currentState.channels = data.channels || [];
                
                if (currentState.channels.length === 0) {
                    throw new Error('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ù†ÙˆØ§Øª Ù…ØªØ§Ø­Ø©');
                }
                
                // ØªØ­Ù…ÙŠÙ„ Ø¢Ø®Ø± Ù‚Ù†Ø§Ø© Ù…Ø´Ø§Ù‡Ø¯Ø©
                const lastChannel = localStorage.getItem(STORAGE_KEYS.LAST_CHANNEL);
                if (lastChannel !== null) {
                    const index = parseInt(lastChannel);
                    if (index >= 0 && index < currentState.channels.length) {
                        currentState.currentChannelIndex = index;
                    }
                }
                
                // ØªØ­Ù…ÙŠÙ„ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª
                const savedVolume = localStorage.getItem(STORAGE_KEYS.VOLUME);
                if (savedVolume !== null) {
                    videoPlayer.volume = parseFloat(savedVolume);
                }
                
                // Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª
                buildChannelsList();
                
                // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
                playCurrentChannel();
                
                // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                }, 1000);
                
            } catch (error) {
                showError('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†ÙˆØ§Øª: ' + error.message);
            }
        }

        // Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª
        function buildChannelsList() {
            channelsList.innerHTML = '';
            
            currentState.channels.forEach((channel, index) => {
                const channelElement = document.createElement('div');
                channelElement.className = 'channel-item';
                channelElement.dataset.index = index;
                
                channelElement.innerHTML = `
                    <img class="channel-logo" src="${channel.logo}" alt="${channel.name}" 
                         onerror="this.src='https://via.placeholder.com/100x60/333/fff?text=TV'">
                    <div class="channel-title">${channel.name}</div>
                `;
                
                channelElement.addEventListener('click', () => {
                    changeChannel(index);
                    hideChannelsList();
                });
                
                channelsList.appendChild(channelElement);
            });
            
            updateActiveChannel();
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ù†Ø´Ø·Ø©
        function updateActiveChannel() {
            document.querySelectorAll('.channel-item').forEach((item, index) => {
                item.classList.toggle('active', index === currentState.currentChannelIndex);
            });
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            const currentChannel = currentState.channels[currentState.currentChannelIndex];
            if (currentChannel) {
                channelLogo.src = currentChannel.logo;
                channelName.textContent = currentChannel.name;
                channelInfo.style.display = 'flex';
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© Ù…Ø¤Ù‚ØªØ§Ù‹
                showTemporaryInfo();
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
        function playCurrentChannel() {
            const channel = currentState.channels[currentState.currentChannelIndex];
            if (!channel) return;
            
            // ØªØ¯Ù…ÙŠØ± Ù…Ø´ØºÙ„ HLS Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¥Ù† ÙˆØ¬Ø¯
            if (currentState.hlsPlayer) {
                currentState.hlsPlayer.destroy();
                currentState.hlsPlayer = null;
            }
            
            // Ø­ÙØ¸ Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            localStorage.setItem(STORAGE_KEYS.LAST_CHANNEL, currentState.currentChannelIndex);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            updateActiveChannel();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… HLS
            if (Hls.isSupported()) {
                currentState.hlsPlayer = new Hls({
                    enableWorker: true,
                    lowLatencyMode: true,
                    backBufferLength: 90
                });
                
                currentState.hlsPlayer.loadSource(channel.stream);
                currentState.hlsPlayer.attachMedia(videoPlayer);
                
                currentState.hlsPlayer.on(Hls.Events.MANIFEST_PARSED, () => {
                    videoPlayer.play().catch(e => {
                        console.log('ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…ØªÙˆÙ‚Ù:', e);
                    });
                });
                
                currentState.hlsPlayer.on(Hls.Events.ERROR, (event, data) => {
                    if (data.fatal) {
                        switch(data.type) {
                            case Hls.ErrorTypes.NETWORK_ERROR:
                                showError('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©ØŒ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©...');
                                setTimeout(() => playCurrentChannel(), 3000);
                                break;
                            case Hls.ErrorTypes.MEDIA_ERROR:
                                showError('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙˆØ³Ø§Ø¦Ø·ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥ØµÙ„Ø§Ø­...');
                                currentState.hlsPlayer.recoverMediaError();
                                break;
                            default:
                                showError('Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ØŒ Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„...');
                                currentState.hlsPlayer.destroy();
                                playCurrentChannel();
                                break;
                        }
                    }
                });
                
            } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
                // Ø¯Ø¹Ù… Safari
                videoPlayer.src = channel.stream;
                videoPlayer.addEventListener('loadedmetadata', () => {
                    videoPlayer.play().catch(e => {
                        console.log('ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…ØªÙˆÙ‚Ù:', e);
                    });
                });
            } else {
                showError('Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ Ù…Ù† Ø§Ù„Ø¨Ø«');
            }
        }

        // ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø©
        function changeChannel(index) {
            if (index < 0 || index >= currentState.channels.length) return;
            
            currentState.currentChannelIndex = index;
            playCurrentChannel();
        }

        // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª
        function toggleChannelsList() {
            if (currentState.isChannelsVisible) {
                hideChannelsList();
            } else {
                showChannelsList();
            }
        }

        function showChannelsList() {
            channelsList.classList.add('visible');
            currentState.isChannelsVisible = true;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
            clearTimeout(currentState.channelsVisibleTimer);
            currentState.channelsVisibleTimer = setTimeout(() => {
                if (currentState.isChannelsVisible) {
                    hideChannelsList();
                }
            }, 5000);
        }

        function hideChannelsList() {
            channelsList.classList.remove('visible');
            currentState.isChannelsVisible = false;
            clearTimeout(currentState.channelsVisibleTimer);
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¤Ù‚ØªØ©
        function showTemporaryInfo() {
            channelInfo.style.display = 'flex';
            clearTimeout(currentState.hintTimer);
            
            currentState.hintTimer = setTimeout(() => {
                channelInfo.style.display = 'none';
            }, 3000);
        }

        // Ø¥Ø¸Ù‡Ø§Ø± ØªÙ„Ù…ÙŠØ­ Ù…Ø¤Ù‚Øª
        function showTemporaryHint(message, duration = 2000) {
            hint.textContent = message;
            hint.classList.add('visible');
            
            clearTimeout(currentState.hintTimer);
            currentState.hintTimer = setTimeout(() => {
                hint.classList.remove('visible');
            }, duration);
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£
        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            
            setTimeout(() => {
                errorMessage.style.display = 'none';
            }, 5000);
        }

        // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', (e) => {
            e.preventDefault();
            
            switch(e.key) {
                case 'ArrowRight':
                    changeChannel(currentState.currentChannelIndex + 1);
                    showTemporaryHint('Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©');
                    break;
                    
                case 'ArrowLeft':
                    changeChannel(currentState.currentChannelIndex - 1);
                    showTemporaryHint('Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©');
                    break;
                    
                case 'ArrowUp':
                    toggleChannelsList();
                    showTemporaryHint(currentState.isChannelsVisible ? 'Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©' : 'Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©');
                    break;
                    
                case ' ':
                    if (videoPlayer.paused) {
                        videoPlayer.play();
                        showTemporaryHint('ØªØ´ØºÙŠÙ„');
                    } else {
                        videoPlayer.pause();
                        showTemporaryHint('Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª');
                    }
                    break;
                    
                case 'm':
                    videoPlayer.muted = !videoPlayer.muted;
                    showTemporaryHint(videoPlayer.muted ? 'ÙƒØªÙ… Ø§Ù„ØµÙˆØª' : 'Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØµÙˆØª');
                    break;
                    
                case 'Escape':
                    if (currentState.isChannelsVisible) {
                        hideChannelsList();
                    } else {
                        showTemporaryHint('Ø§Ø¶ØºØ· Ù…Ø±ØªÙŠÙ† Ù„Ù„Ø®Ø±ÙˆØ¬', 1000);
                        setTimeout(() => {
                            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ù„Ø©
                            hint.textContent = 'Ø§Ø³ØªØ®Ø¯Ù… â¬…ï¸ â¡ï¸ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø© | â¬†ï¸ Ù„Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©';
                        }, 1000);
                    }
                    break;
            }
        });

                // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù„Ù…Ø³
        let touchStartX = 0;
        let touchStartY = 0;
        
        document.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        });
        
        document.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const touchEndY = e.changedTouches[0].clientY;
            
            const diffX = touchStartX - touchEndX;
            const diffY = touchStartY - touchEndY;
            
            // Ø³ÙˆØ§Ø¨ Ø£ÙÙ‚ÙŠ Ù„ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ù†Ø§Ø©
            if (Math.abs(diffX) > 50 && Math.abs(diffX) > Math.abs(diffY)) {
                if (diffX > 0) {
                    // Ø³ÙˆØ§Ø¨ Ù„Ù„ÙŠØ³Ø§Ø± = Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
                    changeChannel(currentState.currentChannelIndex + 1);
                } else {
                    // Ø³ÙˆØ§Ø¨ Ù„Ù„ÙŠÙ…ÙŠÙ† = Ø§Ù„Ù‚Ù†Ø§Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                    changeChannel(currentState.currentChannelIndex - 1);
                }
            }
            
            // Ø³ÙˆØ§Ø¨ Ø±Ø£Ø³ÙŠ Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
            if (touchStartY > window.innerHeight - 100 && diffY > 50) {
                showChannelsList();
            }
        });

        // Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù…Ø§ÙˆØ³
        document.addEventListener('mousemove', () => {
            showTemporaryInfo();
        });

        // Ø­ÙØ¸ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„ØªØºÙŠÙŠØ±
        videoPlayer.addEventListener('volumechange', () => {
            localStorage.setItem(STORAGE_KEYS.VOLUME, videoPlayer.volume);
        });

        // Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        menuToggle.addEventListener('click', toggleChannelsList);

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        document.addEventListener('DOMContentLoaded', initApp);

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù†Ù‚Ø·Ø§Ø¹ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
        window.addEventListener('online', () => {
            showTemporaryHint('ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
        });
        
        window.addEventListener('offline', () => {
            showError('Ø§Ù†Ù‚Ø·Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª');
        });
    </script>
</body>
</html>
